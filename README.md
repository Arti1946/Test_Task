# Тестовое задание для компании "TeamстройИТ"

## Текст задачи:

### Задание состоит из двух частей:
  1. ### API-приложение в docker на FastAPI 
        RESTful API приложение должно быть обернуто в docker compose.  
* **GET /api/repos/top100**  
        Отображение топ 100 публичных репозиториев. Топ составляется по количеству звезд (stars). Плюсом будет реализация сортировки по полям в виде параметров запроса.  
   +  Схема (список объектов):  
       * repo: string – название репозитория (full_name в API GitHub)  
       * owner: string - владелец репозитория  
       *  position_cur: integer – текущая позиция в топе
       * position_prev: integer – предыдущая позиция в топе  
       * stars: integer – количество звёзд
       * watchers: integers – количество просмотров
       * forks: integer – количество форков
       * open_issues: integer – количество открытых issues
       * language: string - язык
 * **GET /api/repos/{owner}/{repo}/activity**  
    Информация об активности репозитория по коммитам за выбранный промежуток времени по дням. Параметры запроса since и until для выбора промежутка дат.
    + Схема (список объектов):
      * date: date
      * commits: int – количество коммитов за конкретный день
      * authors: list[string] – список разработчиков, которые выполняли коммиты
2. ### Парсер на данных с GitHub
Периодический (интервал выбери сам с обоснованием) парсинг данных в PostgreSQL. Схемы таблиц в PostgreSQL должны соответствовать схемам эндпойнтов приложения. Реализация должна быть на базе тривиальной клауд функции Яндекс.Облака (можно развернуть и протестировать на бесплатной версии Яндекс.Облака). По возможности все действия, необходимые для создания клауд функции и триггера, должны совершаться простым скриптом для Yandex Cloud CLI. Параметры подключения к PostgreSQL задаются в переменных окружения клауд функции.
### Другие требования
решение должно быть выложено на GitHub  
запросы к БД должны быть написаны на чистом SQL без использования ORM  
содержать инструкцию по запуску  
python 3.10+, PEP8  
код должен быть безопасным, с обработчиками ошибок  
Пожалуйста, внимательно прочитай ТЗ выше - важно следовать всем требованиям. Также удели внимание структуре и понятности кода. Не забывай про комментарии к ключевым моментам.   
Удачи! :)


------------------------------ 
# Запуск приложения

1. скопируйте проект командой ``` git clone ```  
2. создайте свой файл ```.env ``` для настроек БД POSTGRESQL
3. перейдите в деррикторию с файлом ```docker-compose.yml```
4. в командной строке запустите сборку образов ```docker compose build``` и ссоздания, запуска контейнеров ``` docker compose up```
5. Приложение доступно по адресу  <small>[http://localhost:8000/](https://github.com/markdown-it/markdown-it) </small> 



# Парсер
Парсер находится в этом же репозитории и называется ```parser.py```.   
* Скопируйте файл ```parser.py``` и ```requirements_for_parser.txt ``` в хранилище YandexCloud.  
* Добавьте в переменные окружения облачной функции значения для подключения к БД.(DB_HOST, DB_USER и т.д)
* Укажите в качестве точки входа ``` parser.main ``` 
* Создайте триггер в виде таймера и установите его не меньше чем на час, так как API GitHub разрешает не более 60 запросов в час для каждого пользователя.

  
  
  


